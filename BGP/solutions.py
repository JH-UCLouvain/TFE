ex.exec_cmd("as62r1", "vtysh -c 'configure terminal' -c 'router bgp 62' -c 'network 172.17.186.17/24' -c 'network 192.168.112.6/32' -c 'neighbor 172.17.186.19 remote-as 6' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd("as6r1", "vtysh -c 'configure terminal' -c 'router bgp 6' -c 'network 172.17.186.19/24' -c 'network 172.31.5.45/32' -c 'neighbor 172.17.186.17 remote-as 62' -c 'exit' -c 'exit' -c 'write memory'")
ex.run_client()

ex.exec_cmd("as62r1", "vtysh -c 'configure terminal' -c 'router bgp 62' -c 'neighbor 172.24.41.108 remote-as 62' -c 'neighbor 172.24.41.108 update-source lo' -c 'neighbor 172.24.41.108 next-hop-self' -c 'neighbor 10.221.8.137 remote-as 62' -c 'neighbor 10.221.8.137 update-source lo' -c 'neighbor 10.221.8.137 next-hop-self' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd("as62r2", "vtysh -c 'configure terminal' -c 'router bgp 62' -c 'neighbor 172.19.128.55 remote-as 62' -c 'neighbor 172.19.128.55 update-source lo' -c 'neighbor 172.19.128.55 next-hop-self' -c 'neighbor 10.221.8.137 remote-as 62' -c 'neighbor 10.221.8.137 update-source lo' -c 'neighbor 10.221.8.137 next-hop-self' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd("as62r3", "vtysh -c 'configure terminal' -c 'router bgp 62' -c 'neighbor 172.19.128.55 remote-as 62' -c 'neighbor 172.19.128.55 update-source lo' -c 'neighbor 172.19.128.55 next-hop-self' -c 'neighbor 172.24.41.108 remote-as 62' -c 'neighbor 172.24.41.108 update-source lo' -c 'neighbor 172.24.41.108 next-hop-self' -c 'exit' -c 'exit' -c 'write memory'")
ex.run_client()

ex.exec_cmd("as62r1", "vtysh -c 'configure terminal' -c 'router bgp 62' -c 'network 172.25.16.37/24' -c 'network 192.168.112.6/32' -c 'neighbor 172.25.16.61 remote-as 6' -c 'neighbor 172.31.5.45 remote-as 62' -c 'neighbor 172.31.5.45 update-source lo' -c 'neighbor 172.31.5.45 next-hop-self' -c 'neighbor 172.17.186.17 remote-as 62' -c 'neighbor 172.17.186.17 update-source lo' -c 'neighbor 172.17.186.17 next-hop-self' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd("as62r2", "vtysh -c 'configure terminal' -c 'router bgp 62' -c 'neighbor 192.168.112.6 remote-as 62' -c 'neighbor 192.168.112.6 update-source lo' -c 'neighbor 192.168.112.6 next-hop-self' -c 'neighbor 172.17.186.17 remote-as 62' -c 'neighbor 172.17.186.17 update-source lo' -c 'neighbor 172.17.186.17 next-hop-self' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd("as62r3", "vtysh -c 'configure terminal' -c 'router bgp 62' -c 'neighbor 192.168.112.6 remote-as 62' -c 'neighbor 192.168.112.6 update-source lo' -c 'neighbor 192.168.112.6 next-hop-self' -c 'neighbor 172.31.5.45 remote-as 62' -c 'neighbor 172.31.5.45 update-source lo' -c 'neighbor 172.31.5.45 next-hop-self' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd("as6r1", "vtysh -c 'configure terminal' -c 'router bgp 6' -c 'network 172.25.16.61/24' -c 'network 192.168.19.116/32' -c 'neighbor 172.25.16.37 remote-as 62' -c 'neighbor 192.168.83.104 remote-as 6' -c 'neighbor 192.168.83.104 update-source lo' -c 'neighbor 192.168.83.104 next-hop-self' -c 'neighbor 10.26.142.82 remote-as 6' -c 'neighbor 10.26.142.82 update-source lo' -c 'neighbor 10.26.142.82 next-hop-self' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd("as6r2", "vtysh -c 'configure terminal' -c 'router bgp 6' -c 'neighbor 192.168.19.116 remote-as 6' -c 'neighbor 192.168.19.116 update-source lo' -c 'neighbor 192.168.19.116 next-hop-self' -c 'neighbor 10.26.142.82 remote-as 6' -c 'neighbor 10.26.142.82 update-source lo' -c 'neighbor 10.26.142.82 next-hop-self' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd("as6r3", "vtysh -c 'configure terminal' -c 'router bgp 6' -c 'neighbor 192.168.19.116 remote-as 6' -c 'neighbor 192.168.19.116 update-source lo' -c 'neighbor 192.168.19.116 next-hop-self' -c 'neighbor 192.168.83.104 remote-as 6' -c 'neighbor 192.168.83.104 update-source lo' -c 'neighbor 192.168.83.104 next-hop-self' -c 'exit' -c 'exit' -c 'write memory'")
ex.run_client()

ex.exec_cmd(asAr1.name, f"vtysh -c 'configure terminal' -c 'route-map ACCEPT_ALL permit 10' -c 'exit' -c 'route-map MED permit 20' -c 'set metric 100' -c 'exit' -c 'router bgp {ex.get_asn('A')}' -c 'neighbor {asAr2_asAr1_addr} route-map ACCEPT_ALL in' -c 'neighbor {asAr2_asAr1_addr} route-map ACCEPT_ALL out' -c 'neighbor {asBr1_asAr1_addr} route-map ACCEPT_ALL in' -c 'neighbor {asBr1_asAr1_addr} route-map ACCEPT_ALL out' -c 'neighbor {asBr1_asAr1_addr} route-map MED out' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd(asAr2.name, f"vtysh -c 'configure terminal' -c 'route-map ACCEPT_ALL permit 10' -c 'exit' -c 'router bgp {ex.get_asn('A')}' -c 'neighbor {asAr1_asAr2_addr} route-map ACCEPT_ALL in' -c 'neighbor {asAr1_asAr2_addr} route-map ACCEPT_ALL out' -c 'neighbor {asBr1_asAr2_addr} route-map ACCEPT_ALL in' -c 'neighbor {asBr1_asAr2_addr} route-map ACCEPT_ALL out' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd(asBr1.name, f"vtysh -c 'configure terminal' -c 'route-map ACCEPT_ALL permit 10' -c 'exit' -c 'router bgp {ex.get_asn('B')}' -c 'neighbor {asAr1_asBr1_addr} route-map ACCEPT_ALL in' -c 'neighbor {asAr1_asBr1_addr} route-map ACCEPT_ALL out' -c 'neighbor {asAr2_asBr1_addr} route-map ACCEPT_ALL in' -c 'neighbor {asAr2_asBr1_addr} route-map ACCEPT_ALL out' -c 'exit' -c 'exit' -c 'write memory'")
ex.run_client()

ex.exec_cmd(asAr1.name, f"vtysh -c 'configure terminal' -c 'route-map LOCPRF permit 20' -c 'set local-preference 5' -c 'exit' -c 'router bgp {ex.get_asn('A')}' -c 'neighbor {asDr1_asAr1_addr} route-map LOCPRF in' -c 'exit' -c 'exit' -c 'write memory'")
ex.run_client()

deny_asC = f"DENY_AS{ex.get_asn('C')}_PREFIX"
ex.exec_cmd(asAr1.name, f"vtysh -c 'configure terminal' -c 'ip prefix-list {deny_asC} seq 1 deny {asAr1_asCr1_subnet}/{ex.subnet_addr[asAr1_asCr1_subnet]}' -c 'route-map {deny_asC} deny 10' -c 'match ip address prefix-list {deny_asC}' -c 'exit' -c 'router bgp {ex.get_asn('A')}' -c 'neighbor {asCr1_asAr1_addr} route-map {deny_asC} in' -c 'neighbor {asCr1_asAr1_addr} route-map {deny_asC} out' -c 'exit' -c 'exit' -c 'write memory'")
ex.exec_cmd(asBr1.name, f"vtysh -c 'configure terminal' -c 'ip prefix-list {deny_asC} seq 1 deny {asBr1_asCr1_subnet}/{ex.subnet_addr[asBr1_asCr1_subnet]}' -c 'route-map {deny_asC} deny 10' -c 'match ip address prefix-list {deny_asC}' -c 'exit' -c 'router bgp {ex.get_asn('B')}' -c 'neighbor {asCr1_asBr1_addr} route-map {deny_asC} in' -c 'neighbor {asCr1_asBr1_addr} route-map {deny_asC} out' -c 'exit' -c 'exit' -c 'write memory'")
ex.run_client()